#!/bin/bash
# Release the reset status of I2C muxes and GPIO chips
i2cset -f -y 0 0x2b 0x1a 0xff
i2cset -f -y 0 0x2b 0x1b 0xff
i2cset -f -y 0 0x2b 0x1c 0xff
i2cset -f -y 0 0x2b 0x1d 0xff
i2cset -f -y 0 0x2b 0x1e 0xff
i2cset -f -y 0 0x2b 0x1f 0xff
i2cset -f -y 0 0x2b 0x26 0x06

# eFuse config under voltage protection and reset
i2cset -f -y 0 0x72 0x80
i2cset -f -y 0 0x71 0x80
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x40
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x20
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x10
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x08
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x04
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x02
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x01
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x72 0x40
i2cset -f -y 0 0x71 0x80
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x40
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x20
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x10
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x08
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x04
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x02
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00

i2cset -f -y 0 0x71 0x01
i2cset -f -y 0 0x40 0xf8 0xa2
i2cset -f -y 0 0x40 0x43 0x29 w
i2cset -f -y 0 0x40 0x58 0x29 w
i2cset -f -y 0 0x40 0x59 0x27 w
i2cset -f -y 0 0x40 0x5f 0x29 w
i2cset -f -y 0 0x40 0x01 0x00
i2cset -f -y 0 0x40 0x01 0x80
i2cset -f -y 0 0x40 0xf8 0x00
